@using Blogger.Data
@using System.ComponentModel.DataAnnotations


<div class="mt-5 ms-5 me-5 mb-5" style="height: 100%; overflow: auto">
    @foreach (var post in Posts)
    {
        
        var model = new PostCardModel
        {
            Author = post.Author.UserName ?? "Unknown Author",
            Date = post.PublishDate,
            Title = post.Title,
            PostId = post.PostId,
            RedirectToEditPage = RedirectToEdit
        };

        var line = post.Body.Split('\n').First();

        post.Body = line;
        // if (post.Body.Length > 100)
        // {
        //     model.Body = post.Body.Substring(0, MaxLength - 3) + "...";
        // }
        // else
        // {
        //     model.Body = post.Body;
        // }

        <PostCard Model="@model"/>
    }
</div>

@code {
    [Parameter]
    [Required]
    public List<Post> Posts { get; set; }

    [Parameter]
    public bool RedirectToEdit { get; set; } = false;

    const int MaxLength = 100;

}